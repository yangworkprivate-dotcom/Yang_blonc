<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.1">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">```html &lt;!DOCTYPE html&gt; &lt;html lang="zh-CN"&gt; &lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt; &lt;title&gt;AI表情分析大师&lt;/title&gt; &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"&gt; &lt;script src="https://cdn.jsdelivr.net/npm/chart.js"&gt;&lt;/script&gt; &lt;script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"&gt;&lt;/script&gt; &lt;style&gt; :root { --primary-color: #2563eb; } .upload-area { border: 4px dashed #e5e7eb; border-radius: 1rem; padding: 2rem; transition: all 0.3s; } .upload-area:hover { border-color: var(--primary-color); background-color: #f3f4f6; } .result-card { border: none; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); border-radius: 1rem; } .emotion-chart { height: 300px !important; } @media (max-width: 768px) { .emotion-chart { height: 200px !important; } } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div class="container mx-auto p-4 max-w-4xl"&gt; &lt;h1 class="text-2xl font-bold text-center mb-8"&gt;AI表情分析大师&lt;/h1&gt; &lt;!-- 上传区域 --&gt; &lt;div class="card mb-6"&gt; &lt;div class="card-body"&gt; &lt;div class="upload-area text-center" id="uploadArea"&gt; &lt;p class="text-gray-500 mb-4"&gt;点击或拖拽上传人像照片（JPG/PNG，≤5MB）&lt;/p&gt; &lt;input type="file" id="fileInput" class="d-none" accept="image/jpeg,image/png"&gt; &lt;img id="previewImg" class="mx-auto mt-4 rounded-lg max-h-64 object-cover" style="display: none;"&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;!-- 操作区域 --&gt; &lt;div class="text-center mb-6"&gt; &lt;button id="analyzeBtn" class="btn btn-lg btn-primary px-8" disabled&gt;加载模型中...&lt;/button&gt; &lt;/div&gt; &lt;!-- 结果区域 --&gt; &lt;div class="result-card d-none p-6" id="resultArea"&gt; &lt;h3 class="text-xl font-semibold mb-6 text-center"&gt;分析结果&lt;/h3&gt; &lt;div class="grid grid-cols-1 md:grid-cols-2 gap-6"&gt; &lt;div&gt; &lt;canvas id="emotionChart"&gt;&lt;/canvas&gt; &lt;/div&gt; &lt;div&gt; &lt;div class="mb-5"&gt; &lt;h4 class="text-lg font-medium mb-3"&gt;情绪得分&lt;/h4&gt; &lt;ul class="space-y-2" id="emotionList"&gt;&lt;/ul&gt; &lt;/div&gt; &lt;div&gt; &lt;h4 class="text-lg font-medium mb-3"&gt;专属建议&lt;/h4&gt; &lt;p class="text-gray-700" id="suggestionText"&gt;&lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class="mt-6 text-center"&gt; &lt;button id="shareBtn" class="btn btn-success me-2"&gt;分享结果&lt;/button&gt; &lt;button id="resetBtn" class="btn btn-outline-secondary"&gt;重新分析&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;!-- 模型加载提示 --&gt; &lt;div class="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg text-sm" id="modelTip" style="display: none;"&gt; 模型加载完成，可开始分析 &lt;/div&gt; &lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"&gt;&lt;/script&gt; &lt;script&gt; // 初始化元素 const uploadArea = document.getElementById('uploadArea'); const fileInput = document.getElementById('fileInput'); const previewImg = document.getElementById('previewImg'); const analyzeBtn = document.getElementById('analyzeBtn'); const resultArea = document.getElementById('resultArea'); const emotionList = document.getElementById('emotionList'); const suggestionText = document.getElementById('suggestionText'); const modelTip = document.getElementById('modelTip'); let emotionChart; // 上传交互 uploadArea.addEventListener('click', () =&gt; fileInput.click()); ['dragover', 'dragenter'].forEach(event =&gt; uploadArea.addEventListener(event, (e) =&gt; { e.preventDefault(); uploadArea.classList.add('bg-blue-50'); })); ['dragleave', 'drop'].forEach(event =&gt; uploadArea.addEventListener(event, (e) =&gt; { e.preventDefault(); uploadArea.classList.remove('bg-blue-50'); })); uploadArea.addEventListener('drop', (e) =&gt; { fileInput.files = e.dataTransfer.files; handleFileSelect(); }); fileInput.addEventListener('change', handleFileSelect); // 文件处理 function handleFileSelect() { const file = fileInput.files[0]; if (!file) return; if (file.size &gt; 5 * 1024 * 1024) return alert('文件大小不能超过5MB'); if (!['image/jpeg', 'image/png'].includes(file.type)) return alert('仅支持JPG/PNG格式'); const reader = new FileReader(); reader.onload = (e) =&gt; { previewImg.src = e.target.result; previewImg.style.display = 'block'; analyzeBtn.disabled = false; analyzeBtn.textContent = '开始分析'; }; reader.readAsDataURL(file); } // 模型加载 async function loadModels() { try { await Promise.all([ faceapi.nets.tinyFaceDetector.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/weights'), faceapi.nets.faceExpressionNet.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/weights') ]); analyzeBtn.textContent = '选择照片开始分析'; modelTip.style.display = 'block'; setTimeout(() =&gt; modelTip.style.display = 'none', 3000); } catch (error) { alert('模型加载失败，请检查网络连接'); console.error('模型加载错误:', error); } } loadModels(); // 分析逻辑 analyzeBtn.addEventListener('click', async () =&gt; { analyzeBtn.disabled = true; analyzeBtn.textContent = '分析中...'; try { const detections = await faceapi.detectAllFaces( previewImg, new faceapi.TinyFaceDetectorOptions({ inputSize: 320 }) ).withFaceExpressions(); if (detections.length === 0) throw new Error('未检测到人脸'); const expressions = detections[0].expressions; const emotionData = [ { name: '快乐', score: Math.round(expressions.happy * 100) }, { name: '悲伤', score: Math.round(expressions.sad * 100) }, { name: '愤怒', score: Math.round(expressions.angry * 100) }, { name: '惊讶', score: Math.round(expressions.surprised * 100) }, { name: '恐惧', score: Math.round(expressions.fearful * 100) } ]; // 更新界面 renderEmotionList(emotionData); renderEmotionChart(emotionData); renderSuggestion(emotionData); resultArea.classList.remove('d-none'); analyzeBtn.textContent = '重新分析'; analyzeBtn.disabled = false; } catch (error) { alert(error.message || '分析失败，请重试'); analyzeBtn.textContent = '开始分析'; analyzeBtn.disabled = false; } }); // 渲染情绪列表 function renderEmotionList(data) { emotionList.innerHTML = data.map(emotion =&gt; ` &lt;li class="flex justify-between items-center p-2 bg-gray-50 rounded"&gt; &lt;span&gt;${emotion.name}&lt;/span&gt; &lt;span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm"&gt; ${emotion.score}% &lt;/span&gt; &lt;/li&gt; `).join(''); } // 渲染雷达图 function renderEmotionChart(data) { if (emotionChart) emotionChart.destroy(); const ctx = document.getElementById('emotionChart').getContext('2d'); emotionChart = new Chart(ctx, { type: 'radar', data: { labels: data.map(e =&gt; e.name), datasets: [{ label: '情绪得分（%）', data: data.map(e =&gt; e.score), backgroundColor: 'rgba(37, 99, 235, 0.1)', borderColor: 'rgba(37, 99, 235, 1)', pointBackgroundColor: 'rgba(37, 99, 235, 1)', pointBorderColor: '#fff', pointHoverRadius: 6 }] }, options: { scales: { r: { min: 0, max: 100, ticks: { stepSize: 20 }, grid: { color: '#e5e7eb' } } }, plugins: { legend: { display: false } } } }); } // 生成建议 function renderSuggestion(data) { const maxEmotion = data.reduce((a, b) =&gt; a.score &gt; b.score ? a : b); const suggestions = { 快乐: '你的笑容太有感染力了！今天适合参加聚会或分享趣事，让快乐翻倍~', 悲伤: '或许需要一个温暖的拥抱？试着听一首治愈系音乐，或者吃份喜欢的甜品，心情会慢慢放晴', 愤怒: '先深吸一口气~ 可以试着把情绪写下来再撕掉，或者去户外走5分钟，让心情平静', 惊讶: '是什么让你如此意外？快用文字或照片记录这个瞬间，说不定会成为珍贵的回忆', 恐惧: '你比想象中更勇敢！试着列出恐惧的原因，会发现它其实没那么可怕' }; suggestionText.textContent = suggestions[maxEmotion.name]; } // 分享功能 document.getElementById('shareBtn').addEventListener('click', () =&gt; { if (navigator.share) { navigator.share({ title: 'AI表情分析结果', text: `我的情绪分析结果：${getTopEmotion()}，快来试试吧！`, url: window.location.href }).catch(() =&gt; alert('分享失败，请尝试截图分享')); } else { alert('当前浏览器不支持分享功能，请复制链接或截图分享'); } }); // 获取主要情绪 function getTopEmotion() { const data = Array.from(emotionList.children).map(li =&gt; ({ name: li.querySelector('span:first-child').textContent, score: parseInt(li.querySelector('span:last-child').textContent) })); return data.reduce((a, b) =&gt; a.score &gt; b.score ? a.name : b.name); } // 重置功能 document.getElementById('resetBtn').addEventListener('click', () =&gt; { resultArea.classList.add('d-none'); previewImg.style.display = 'none'; fileInput.value = ''; analyzeBtn.textContent = '开始分析'; analyzeBtn.disabled = false; }); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; ```</p>
<p class="p2"><br></p>
</body>
</html>
