<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.1">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #6d6d6d; -webkit-text-stroke: #6d6d6d}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #0000ff; -webkit-text-stroke: #0000ff}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #6b0001; -webkit-text-stroke: #6b0001}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #fb0007; -webkit-text-stroke: #fb0007}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; -webkit-text-stroke: #000000}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; -webkit-text-stroke: #000000; min-height: 14.0px}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #0f7001; -webkit-text-stroke: #0f7001}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #900112; -webkit-text-stroke: #900112}
    span.s1 {font-kerning: none; background-color: #fffffe}
    span.s2 {font-kerning: none; color: #fb0007; background-color: #fffffe; -webkit-text-stroke: 0px #fb0007}
    span.s3 {font-kerning: none; color: #2a2a2a; background-color: #fffffe; -webkit-text-stroke: 0px #2a2a2a}
    span.s4 {font-kerning: none; color: #6b0001; background-color: #fffffe; -webkit-text-stroke: 0px #6b0001}
    span.s5 {font-kerning: none; color: #000000; background-color: #fffffe; -webkit-text-stroke: 0px #000000}
    span.s6 {font-kerning: none; color: #0000ff; background-color: #fffffe; -webkit-text-stroke: 0px #0000ff}
    span.s7 {font-kerning: none; color: #093c94; background-color: #fffffe; -webkit-text-stroke: 0px #093c94}
    span.s8 {font-kerning: none; color: #137646; background-color: #fffffe; -webkit-text-stroke: 0px #137646}
    span.s9 {font-kerning: none}
    span.s10 {font-kerning: none; color: #900112; background-color: #fffffe; -webkit-text-stroke: 0px #900112}
    span.s11 {font-kerning: none; color: #0e6e6d; background-color: #fffffe; -webkit-text-stroke: 0px #0e6e6d}
    span.s12 {font-kerning: none; color: #0f7001; background-color: #fffffe; -webkit-text-stroke: 0px #0f7001}
    span.s13 {font-kerning: none; color: #bf1c25; background-color: #fffffe; -webkit-text-stroke: 0px #bf1c25}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s4">html</span><span class="s5"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s1">"zh-CN"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s6">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s5"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">title</span><span class="s3">&gt;</span><span class="s1">AI表情分析大师</span><span class="s3">&lt;/</span><span class="s4">title</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">link</span><span class="s5"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"</span><span class="s5"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"stylesheet"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.jsdelivr.net/npm/chart.js"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">:root</span><span class="s5"> { </span><span class="s1">--primary-color:</span><span class="s5"> </span><span class="s7">#2563eb</span><span class="s5">; }</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.upload-area</span><span class="s5"> { </span><span class="s1">border:</span><span class="s5"> </span><span class="s8">4px</span><span class="s5"> </span><span class="s7">dashed</span><span class="s5"> </span><span class="s7">#e5e7eb</span><span class="s5">; </span><span class="s1">border-radius:</span><span class="s5"> </span><span class="s8">1rem</span><span class="s5">; </span><span class="s1">padding:</span><span class="s5"> </span><span class="s8">2rem</span><span class="s5">; </span><span class="s1">transition:</span><span class="s5"> </span><span class="s7">all</span><span class="s5"> </span><span class="s8">0.3s</span><span class="s5">; }</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.upload-area:hover</span><span class="s5"> { </span><span class="s1">border-color:</span><span class="s5"> </span><span class="s7">var(--primary-color)</span><span class="s5">; </span><span class="s1">background-color:</span><span class="s5"> </span><span class="s7">#f3f4f6</span><span class="s5">; }</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.result-card</span><span class="s5"> { </span><span class="s1">border:</span><span class="s5"> </span><span class="s7">none</span><span class="s5">; </span><span class="s1">box-shadow:</span><span class="s5"> </span><span class="s8">0</span><span class="s5"> </span><span class="s8">4px</span><span class="s5"> </span><span class="s8">6px</span><span class="s5"> </span><span class="s8">-1px</span><span class="s5"> </span><span class="s7">rgba(</span><span class="s8">0</span><span class="s5">,</span><span class="s8">0</span><span class="s5">,</span><span class="s8">0</span><span class="s5">,</span><span class="s8">0.1</span><span class="s7">)</span><span class="s5">; </span><span class="s1">border-radius:</span><span class="s5"> </span><span class="s8">1rem</span><span class="s5">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.emotion-chart</span><span class="s1"> { </span><span class="s2">height:</span><span class="s1"> </span><span class="s8">300px</span><span class="s1"> </span><span class="s6">!important</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>@</span><span class="s4">media</span><span class="s1"> (</span><span class="s4">max-width:</span><span class="s1"> 768</span><span class="s4">px</span><span class="s1">) { .emotion-chart { </span><span class="s2">height:</span><span class="s1"> </span><span class="s8">200px</span><span class="s1"> </span><span class="s6">!important</span><span class="s1">; } }</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"container mx-auto p-4 max-w-4xl"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">h1</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold text-center mb-8"</span><span class="s3">&gt;</span><span class="s5">AI表情分析大师</span><span class="s3">&lt;/</span><span class="s4">h1</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- 上传区域 --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"card mb-6"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"card-body"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"upload-area text-center"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"uploadArea"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s4">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-gray-500 mb-4"</span><span class="s3">&gt;</span><span class="s1">点击或拖拽上传人像照片（JPG/PNG，≤5MB）</span><span class="s3">&lt;/</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s4">input</span><span class="s5"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"file"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"fileInput"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"d-none"</span><span class="s5"> </span><span class="s2">accept</span><span class="s3">=</span><span class="s1">"image/jpeg,image/png"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s4">img</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"previewImg"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mx-auto mt-4 rounded-lg max-h-64 object-cover"</span><span class="s5"> </span><span class="s2">style</span><span class="s3">=</span><span class="s1">"display: none;"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- 操作区域 --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center mb-6"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"analyzeBtn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"btn btn-lg btn-primary px-8"</span><span class="s5"> </span><span class="s2">disabled</span><span class="s3">&gt;</span><span class="s5">加载模型中...</span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- 结果区域 --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"result-card d-none p-6"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"resultArea"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">h3</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-xl font-semibold mb-6 text-center"</span><span class="s3">&gt;</span><span class="s5">分析结果</span><span class="s3">&lt;/</span><span class="s4">h3</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"grid grid-cols-1 md:grid-cols-2 gap-6"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s4">canvas</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s6">"emotionChart"</span><span class="s3">&gt;&lt;/</span><span class="s4">canvas</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"mb-5"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s4">h4</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-lg font-medium mb-3"</span><span class="s3">&gt;</span><span class="s1">情绪得分</span><span class="s3">&lt;/</span><span class="s4">h4</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s4">ul</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"space-y-2"</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s6">"emotionList"</span><span class="s3">&gt;&lt;/</span><span class="s4">ul</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s4">h4</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-lg font-medium mb-3"</span><span class="s3">&gt;</span><span class="s1">专属建议</span><span class="s3">&lt;/</span><span class="s4">h4</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s4">p</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-gray-700"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"suggestionText"</span><span class="s3">&gt;&lt;/</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-6 text-center"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"shareBtn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"btn btn-success me-2"</span><span class="s3">&gt;</span><span class="s5">分享结果</span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"resetBtn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"btn btn-outline-secondary"</span><span class="s3">&gt;</span><span class="s5">重新分析</span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- 模型加载提示 --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg text-sm"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modelTip"</span><span class="s5"> </span><span class="s2">style</span><span class="s3">=</span><span class="s1">"display: none;"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>模型加载完成，可开始分析</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">const</span><span class="s1"> uploadArea = document.getElementById(</span><span class="s10">'uploadArea'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">const</span><span class="s1"> fileInput = document.getElementById(</span><span class="s10">'fileInput'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">const</span><span class="s1"> previewImg = document.getElementById(</span><span class="s10">'previewImg'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">const</span><span class="s1"> analyzeBtn = document.getElementById(</span><span class="s10">'analyzeBtn'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">const</span><span class="s1"> resultArea = document.getElementById(</span><span class="s10">'resultArea'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">const</span><span class="s1"> emotionList = document.getElementById(</span><span class="s10">'emotionList'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">const</span><span class="s1"> suggestionText = document.getElementById(</span><span class="s10">'suggestionText'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">const</span><span class="s1"> modelTip = document.getElementById(</span><span class="s10">'modelTip'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">let</span><span class="s1"> emotionChart;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// 修复模型加载路径（添加斜杠确保CDN资源正确访问）</span></p>
<p class="p8"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s6">const</span><span class="s5"> </span><span class="s11">MODEL_URL</span><span class="s5"> = </span><span class="s1">'https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/weights/'</span><span class="s5">;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// 上传交互优化</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>uploadArea.addEventListener(</span><span class="s10">'click'</span><span class="s1">, () =&gt; fileInput.click());</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>[</span><span class="s10">'dragover'</span><span class="s1">, </span><span class="s10">'dragenter'</span><span class="s1">].forEach(event =&gt; uploadArea.addEventListener(event, (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>e.preventDefault();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>uploadArea.classList.add(</span><span class="s10">'bg-blue-50'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>[</span><span class="s10">'dragleave'</span><span class="s1">, </span><span class="s10">'drop'</span><span class="s1">].forEach(event =&gt; uploadArea.addEventListener(event, (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>e.preventDefault();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>uploadArea.classList.remove(</span><span class="s10">'bg-blue-50'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>uploadArea.addEventListener(</span><span class="s10">'drop'</span><span class="s1">, (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>e.preventDefault();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>fileInput.files = e.dataTransfer.files;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>handleFileSelect();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>fileInput.addEventListener(</span><span class="s10">'change'</span><span class="s1">, handleFileSelect);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">function</span><span class="s1"> handleFileSelect() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">const</span><span class="s1"> file = fileInput.files[</span><span class="s8">0</span><span class="s1">];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">if</span><span class="s1"> (!file) </span><span class="s6">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">if</span><span class="s1"> (file.size &gt; </span><span class="s8">5</span><span class="s1"> * </span><span class="s8">1024</span><span class="s1"> * </span><span class="s8">1024</span><span class="s1">) </span><span class="s6">return</span><span class="s1"> alert(</span><span class="s10">'文件大小不能超过5MB'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">if</span><span class="s1"> (![</span><span class="s10">'image/jpeg'</span><span class="s1">, </span><span class="s10">'image/png'</span><span class="s1">].includes(file.type)) </span><span class="s6">return</span><span class="s1"> alert(</span><span class="s10">'仅支持JPG/PNG格式'</span><span class="s1">);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">const</span><span class="s1"> reader = </span><span class="s6">new</span><span class="s1"> </span><span class="s11">FileReader</span><span class="s1">();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>reader.onload = (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>previewImg.src = e.target.result;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>previewImg.style.display = </span><span class="s10">'block'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>analyzeBtn.disabled = </span><span class="s6">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>analyzeBtn.textContent = </span><span class="s10">'开始分析'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>reader.readAsDataURL(file);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// 模型加载优化（添加错误捕获和重试机制）</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">async</span><span class="s1"> </span><span class="s6">function</span><span class="s1"> loadModels() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s6">await</span><span class="s1"> </span><span class="s11">Promise</span><span class="s1">.all([</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>faceapi.nets.tinyFaceDetector.loadFromUri(</span><span class="s11">MODEL_URL</span><span class="s1">),</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>faceapi.nets.faceExpressionNet.loadFromUri(</span><span class="s11">MODEL_URL</span><span class="s1">)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>analyzeBtn.textContent = </span><span class="s10">'选择照片开始分析'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>modelTip.style.display = </span><span class="s10">'block'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>setTimeout(() =&gt; modelTip.style.display = </span><span class="s10">'none'</span><span class="s1">, </span><span class="s8">3000</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s6">catch</span><span class="s1"> (error) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>console.error(</span><span class="s10">'模型加载失败，正在重试...'</span><span class="s1">, error);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">// 重试加载</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>setTimeout(loadModels, </span><span class="s8">3000</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>analyzeBtn.textContent = </span><span class="s10">'模型加载失败，重试中...'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// 分析逻辑优化（添加加载状态）</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>analyzeBtn.addEventListener(</span><span class="s10">'click'</span><span class="s1">, </span><span class="s6">async</span><span class="s1"> () =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">if</span><span class="s1"> (!previewImg.src) </span><span class="s6">return</span><span class="s1"> alert(</span><span class="s10">'请先上传照片'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>analyzeBtn.disabled = </span><span class="s6">true</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>analyzeBtn.textContent = </span><span class="s10">'分析中...'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s6">const</span><span class="s1"> detections = </span><span class="s6">await</span><span class="s1"> faceapi.detectAllFaces(</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>previewImg,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s6">new</span><span class="s1"> faceapi.</span><span class="s11">TinyFaceDetectorOptions</span><span class="s1">({ inputSize: </span><span class="s8">320</span><span class="s1"> })</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>).withFaceExpressions();</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s6">if</span><span class="s1"> (detections.length === </span><span class="s8">0</span><span class="s1">) </span><span class="s6">throw</span><span class="s1"> </span><span class="s6">new</span><span class="s1"> </span><span class="s11">Error</span><span class="s1">(</span><span class="s10">'未检测到人脸，请上传清晰人像'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s6">const</span><span class="s1"> expressions = detections[</span><span class="s8">0</span><span class="s1">].expressions;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s6">const</span><span class="s1"> emotionData = [</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>{ name: </span><span class="s10">'快乐'</span><span class="s1">, score: </span><span class="s11">Math</span><span class="s1">.round(expressions.happy * </span><span class="s8">100</span><span class="s1">) },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>{ name: </span><span class="s10">'悲伤'</span><span class="s1">, score: </span><span class="s11">Math</span><span class="s1">.round(expressions.sad * </span><span class="s8">100</span><span class="s1">) },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>{ name: </span><span class="s10">'愤怒'</span><span class="s1">, score: </span><span class="s11">Math</span><span class="s1">.round(expressions.angry * </span><span class="s8">100</span><span class="s1">) },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>{ name: </span><span class="s10">'惊讶'</span><span class="s1">, score: </span><span class="s11">Math</span><span class="s1">.round(expressions.surprised * </span><span class="s8">100</span><span class="s1">) },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>{ name: </span><span class="s10">'恐惧'</span><span class="s1">, score: </span><span class="s11">Math</span><span class="s1">.round(expressions.fearful * </span><span class="s8">100</span><span class="s1">) }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>];</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>renderEmotionList(emotionData);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>renderEmotionChart(emotionData);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>renderSuggestion(emotionData);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>resultArea.classList.remove(</span><span class="s10">'d-none'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>analyzeBtn.textContent = </span><span class="s10">'重新分析'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>analyzeBtn.disabled = </span><span class="s6">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s6">catch</span><span class="s1"> (error) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>alert(error.message || </span><span class="s10">'分析失败，请重试'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>analyzeBtn.textContent = </span><span class="s10">'开始分析'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>analyzeBtn.disabled = </span><span class="s6">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">function</span><span class="s1"> renderEmotionList(data) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>emotionList.innerHTML = data.map(emotion =&gt; </span><span class="s10">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                </span>&lt;li class="flex justify-between items-center p-2 bg-gray-50 rounded"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;span&gt;</span><span class="s5">${emotion.name}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s5">${emotion.score}</span><span class="s1">%</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/span&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/li&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span>`</span><span class="s5">).join(</span><span class="s1">''</span><span class="s5">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">function</span><span class="s1"> renderEmotionChart(data) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">if</span><span class="s1"> (emotionChart) emotionChart.destroy();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">const</span><span class="s1"> ctx = document.getElementById(</span><span class="s10">'emotionChart'</span><span class="s1">).getContext(</span><span class="s10">'2d'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>emotionChart = </span><span class="s6">new</span><span class="s1"> </span><span class="s11">Chart</span><span class="s1">(ctx, {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>type: </span><span class="s10">'radar'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>data: {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>labels: data.map(e =&gt; e.name),</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>datasets: [{</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>label: </span><span class="s10">'情绪得分（%）'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>data: data.map(e =&gt; e.score),</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>backgroundColor: </span><span class="s10">'rgba(37, 99, 235, 0.1)'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>borderColor: </span><span class="s10">'rgba(37, 99, 235, 1)'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>pointBackgroundColor: </span><span class="s10">'rgba(37, 99, 235, 1)'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>pointBorderColor: </span><span class="s10">'#fff'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>pointHoverRadius: </span><span class="s8">6</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}]</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>},</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>options: {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>scales: { r: { min: </span><span class="s8">0</span><span class="s1">, max: </span><span class="s8">100</span><span class="s1">, ticks: { stepSize: </span><span class="s8">20</span><span class="s1"> }, grid: { color: </span><span class="s10">'#e5e7eb'</span><span class="s1"> } }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>},</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>plugins: { legend: { display: </span><span class="s6">false</span><span class="s1"> } }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">function</span><span class="s1"> renderSuggestion(data) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">const</span><span class="s1"> maxEmotion = data.reduce((a, b) =&gt; a.score &gt; b.score ? a : b);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">const</span><span class="s1"> suggestions = {</span></p>
<p class="p8"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s13">快乐</span><span class="s5">: </span><span class="s1">'你的笑容太有感染力了！今天适合参加聚会或分享趣事，让快乐翻倍~'</span><span class="s5">,</span></p>
<p class="p8"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s13">悲伤</span><span class="s5">: </span><span class="s1">'或许需要一个温暖的拥抱？试着听一首治愈系音乐，或者吃份喜欢的甜品，心情会慢慢放晴'</span><span class="s5">,</span></p>
<p class="p8"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s13">愤怒</span><span class="s5">: </span><span class="s1">'先深吸一口气~ 可以试着把情绪写下来再撕掉，或者去户外走5分钟，让心情平静'</span><span class="s5">,</span></p>
<p class="p8"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s13">惊讶</span><span class="s5">: </span><span class="s1">'是什么让你如此意外？快用文字或照片记录这个瞬间，说不定会成为珍贵的回忆'</span><span class="s5">,</span></p>
<p class="p8"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s13">恐惧</span><span class="s5">: </span><span class="s1">'你比想象中更勇敢！试着列出恐惧的原因，会发现它其实没那么可怕'</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>suggestionText.textContent = suggestions[maxEmotion.name] || </span><span class="s10">'保持平常心，每天都是美好的一天'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById(</span><span class="s10">'shareBtn'</span><span class="s1">).addEventListener(</span><span class="s10">'click'</span><span class="s1">, () =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">if</span><span class="s1"> (navigator.share) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>navigator.share({</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>title: </span><span class="s10">'AI表情分析结果'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>text: </span><span class="s10">`我的情绪分析结果：</span><span class="s1">${getTopEmotion()}</span><span class="s10">，快来试试吧！`</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>url: window.location.href</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}).</span><span class="s6">catch</span><span class="s1">(() =&gt; alert(</span><span class="s10">'分享失败，请尝试截图分享'</span><span class="s1">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s6">else</span><span class="s1"> {</span></p>
<p class="p8"><span class="s5"><span class="Apple-converted-space">                </span>alert(</span><span class="s1">'当前浏览器不支持分享功能，请复制链接或截图分享'</span><span class="s5">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">function</span><span class="s1"> getTopEmotion() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">return</span><span class="s1"> </span><span class="s11">Array</span><span class="s1">.</span><span class="s6">from</span><span class="s1">(emotionList.children)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>.map(li =&gt; ({</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>name: li.querySelector(</span><span class="s10">'span:first-child'</span><span class="s1">).textContent,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>score: parseInt(li.querySelector(</span><span class="s10">'span:last-child'</span><span class="s1">).textContent)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}))</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>.reduce((a, b) =&gt; a.score &gt; b.score ? a.name : b.name);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById(</span><span class="s10">'resetBtn'</span><span class="s1">).addEventListener(</span><span class="s10">'click'</span><span class="s1">, () =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>resultArea.classList.add(</span><span class="s10">'d-none'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>previewImg.style.display = </span><span class="s10">'none'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>fileInput.value = </span><span class="s10">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>analyzeBtn.textContent = </span><span class="s10">'开始分析'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>analyzeBtn.disabled = </span><span class="s6">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// 初始化加载模型</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>loadModels();</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
</body>
</html>
